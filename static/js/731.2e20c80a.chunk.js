"use strict";(self.webpackChunkcinemo=self.webpackChunkcinemo||[]).push([[731],{1731:function(e,t,s){s.r(t),s.d(t,{default:function(){return w}});var n=s(9875),i=s(4088),a=s(4165),r=s(5861),l=s(9439),c=s(2791),o=s(887),u={container:"settings_container__A7g6U",settingsSection:"settings_settingsSection__2Qe28",title:"settings_title__msdve",settings:"settings_settings__o5jz6",form:"settings_form__bfiM+",formSection:"settings_formSection__rlH6i",disable:"settings_disable__NE2ah",profilePhoto:"settings_profilePhoto__OAo7J",fileInput:"settings_fileInput__UNahQ",button:"settings_button__TUuPx"};function d(e){return new Promise((function(t,s){var n=document.createElement("canvas"),i=new Image;i.onload=function(){n.width=100,n.height=110,n.getContext("2d").drawImage(i,0,0,n.width,n.height),n.toBlob((function(e){if(null===e)return s(e);t(e)}),"image/jpeg",1)},i.src=URL.createObjectURL(e)}))}var m={successMessage:"messageBox_successMessage__gSL0R",getIn:"messageBox_getIn__wDFGV",btnContainer:"messageBox_btnContainer__3KoAD",closeButton:"messageBox_closeButton__ZLeVl"},f=s(184);function x(e){var t=e.onClose;return(0,f.jsxs)("div",{className:m.successMessage,children:[(0,f.jsx)("div",{children:(0,f.jsx)("p",{children:"Se actualiz\xf3 la informaci\xf3n correctamente"})}),(0,f.jsx)("div",{className:m.btnContainer,children:(0,f.jsx)("button",{className:m.closeButton,onClick:t,title:"Cerrar mensaje",children:"x"})})]})}function h(e){var t=e.user,s=(0,c.useState)(t.photoURL),n=(0,l.Z)(s,2),i=n[0],m=n[1],h=(0,c.useState)(!1),j=(0,l.Z)(h,2),g=j[0],_=j[1],p=(0,c.useRef)(null),v=(0,c.useRef)(),N=(0,c.useRef)();function b(){return(b=(0,r.Z)((0,a.Z)().mark((function e(s){var n,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),n=v.current.value,i=N.current.value,e.next=5,(0,o.Al)(t.uid,{name:n,lastName:i});case 5:_(!0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return(Z=(0,r.Z)((0,a.Z)().mark((function e(s){var n,i,r,l,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=s.target.files)&&n.length>0)){e.next=17;break}return i=n[0],e.next=5,d(i);case 5:return r=e.sent,e.next=8,(0,o.jY)(t.uid,r);case 8:if(!(l=e.sent)){e.next=17;break}return e.next=12,(0,o.Qc)(l);case 12:return c=e.sent,e.next=15,(0,o.Al)(t.uid,{photoURL:c});case 15:m(c),_(!0);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,c.useEffect)((function(){v.current.value=t.name,N.current.value=t.lastName}),[]),(0,f.jsxs)("div",{className:u.container,children:[(0,f.jsxs)("div",{className:u.settingsSection,children:[(0,f.jsx)("div",{className:u.title,children:(0,f.jsx)("h2",{children:"Foto de perfil"})}),(0,f.jsxs)("div",{className:u.settings,children:[(0,f.jsx)("div",{className:u.profilePhoto,children:(0,f.jsx)("img",{src:i,alt:"foto de perfil"})}),(0,f.jsx)("input",{type:"file",className:u.fileInput,ref:p,onChange:function(e){return Z.apply(this,arguments)}}),(0,f.jsx)("button",{type:"button",className:u.button,onClick:function(){p.current.click()},title:"Elegir una foto de perfil",children:"Elige una foto de perfil"})]})]}),(0,f.jsxs)("form",{className:u.form,onSubmit:function(e){return b.apply(this,arguments)},children:[(0,f.jsxs)("div",{className:u.formSection,children:[(0,f.jsx)("div",{className:u.title,children:(0,f.jsx)("label",{htmlFor:"name",children:"Nombre"})}),(0,f.jsx)("div",{className:u.settings,children:(0,f.jsx)("input",{type:"text",name:"name",id:"name",ref:v})})]}),(0,f.jsxs)("div",{className:u.formSection,children:[(0,f.jsx)("div",{className:u.title,children:(0,f.jsx)("label",{htmlFor:"lastName",children:"Apellido"})}),(0,f.jsx)("div",{className:u.settings,children:(0,f.jsx)("input",{type:"text",name:"lastName",id:"lastName",ref:N})})]}),(0,f.jsxs)("div",{className:u.formSection,children:[(0,f.jsx)("div",{className:u.title,children:(0,f.jsx)("label",{htmlFor:"email",children:"Correo"})}),(0,f.jsx)("div",{className:u.settings,children:(0,f.jsx)("input",{type:"text",name:"email",id:"email",disabled:!0,value:t.email,className:u.disable})})]}),(0,f.jsx)("div",{className:u.formSection,children:(0,f.jsx)("button",{type:"submit",className:u.button,title:"Guardar cambios",children:"Guardar cambios"})})]}),g&&(0,f.jsx)(x,{onClose:function(){_(!1)}})]})}var j={container:"settingsContainer_container__-lB6i"};function g(e){var t=e.children;return(0,f.jsx)("section",{className:j.container,children:t})}var _=s(2268),p=s(422),v=s(3793),N=s(1221),b=s(4491),Z=s(7408),S=s(1087),C={logo:"userSettings_logo__bwbpj"};function w(){var e=(0,v.Z)(),t=e.userData,s=e.isLoading;return(0,f.jsxs)("div",{children:[(0,f.jsx)(b.Z,{children:(0,f.jsxs)("nav",{className:C.navBar,children:[(0,f.jsx)(S.rU,{to:"/",className:C.logo,children:(0,f.jsx)(n.Z,{})}),s?(0,f.jsx)(_.Z,{}):(0,f.jsx)(p.Z,{user:t})]})}),(0,f.jsx)(Z.Z,{children:(0,f.jsx)(g,{children:s?null:(0,f.jsx)(h,{user:t})})}),(0,f.jsx)(N.Z,{children:(0,f.jsx)(i.t,{})})]})}}}]);
//# sourceMappingURL=731.2e20c80a.chunk.js.map