{"version":3,"file":"static/js/731.4585495f.chunk.js","mappings":"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","sources":["webpack://cinemo/./src/styles/components/settings.module.css?40c9","utilities/compressImage.js","webpack://cinemo/./src/styles/components/messageBox.module.css?4f06","components/MessageBox.jsx","components/Settings.jsx","webpack://cinemo/./src/styles/components/settingsContainer.module.css?68b1","components/SettingsContainer.jsx","webpack://cinemo/./src/styles/pages/userSettings.module.css?f7e6","pages/UserSettings.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"settings_container__xt6XN\",\"settingsSection\":\"settings_settingsSection__xWSBi\",\"title\":\"settings_title__Oou5E\",\"settings\":\"settings_settings__jhaUY\",\"form\":\"settings_form__bkGa8\",\"formSection\":\"settings_formSection__8xlzE\",\"disable\":\"settings_disable__2x-UR\",\"profilePhoto\":\"settings_profilePhoto__bgWMv\",\"fileInput\":\"settings_fileInput__e+tIm\",\"button\":\"settings_button__I+Kfd\"};","export default function compressImage(file) {\r\n  return new Promise((resolve, reject) => {\r\n    const canvas = document.createElement('canvas');\r\n    const image = new Image();\r\n    image.onload = () => {\r\n      canvas.width = 100;\r\n      canvas.height = 110;\r\n      canvas\r\n        .getContext('2d')\r\n        .drawImage(image, 0, 0, canvas.width, canvas.height);\r\n      canvas.toBlob(\r\n        blob => {\r\n          if (blob === null) return reject(blob);\r\n          else resolve(blob);\r\n        },\r\n        'image/jpeg',\r\n        1\r\n      );\r\n    };\r\n    image.src = URL.createObjectURL(file);\r\n  });\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"successMessage\":\"messageBox_successMessage__1eSQe\",\"getIn\":\"messageBox_getIn__Bs9JM\",\"btnContainer\":\"messageBox_btnContainer__-1zVY\",\"closeButton\":\"messageBox_closeButton__dfHL2\"};","import styles from 'styles/components/messageBox.module.css';\r\n\r\nexport default function MessageBox({ onClose }) {\r\n  return (\r\n    <div className={styles.successMessage}>\r\n      <div>\r\n        <p>Se actualizó la información correctamente</p>\r\n      </div>\r\n      <div className={styles.btnContainer}>\r\n        <button\r\n          className={styles.closeButton}\r\n          onClick={onClose}\r\n          title='Cerrar mensaje'\r\n        >\r\n          x\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useRef, useState } from 'react';\r\nimport {\r\n  getProfilePhotoUrl,\r\n  setProfilePhoto,\r\n  updateUserData,\r\n} from 'services/firebase';\r\nimport styles from 'styles/components/settings.module.css';\r\nimport compressImage from 'utilities/compressImage';\r\nimport MessageBox from './MessageBox';\r\n\r\nexport default function Settings({ user }) {\r\n  const [photo, setPhoto] = useState(user.photoURL);\r\n  const [message, setMessage] = useState(false);\r\n  const fileRef = useRef(null);\r\n  const nameRef = useRef();\r\n  const lastNameRef = useRef();\r\n\r\n  useEffect(() => {\r\n    nameRef.current.value = user.name;\r\n    lastNameRef.current.value = user.lastName;\r\n  }, []);\r\n\r\n  function handleClose() {\r\n    setMessage(false);\r\n  }\r\n\r\n  async function handleSubmit(e) {\r\n    e.preventDefault();\r\n    const name = nameRef.current.value;\r\n    const lastName = lastNameRef.current.value;\r\n    await updateUserData(user.uid, { name, lastName });\r\n    setMessage(true);\r\n  }\r\n\r\n  function handleOpenFilePicker() {\r\n    fileRef.current.click();\r\n  }\r\n\r\n  async function handleLoadFile(e) {\r\n    const files = e.target.files;\r\n\r\n    if (files && files.length > 0) {\r\n      const file = files[0];\r\n      const blob = await compressImage(file);\r\n      const response = await setProfilePhoto(user.uid, blob);\r\n      console.log(blob);\r\n      if (response) {\r\n        const url = await getProfilePhotoUrl(response);\r\n        await updateUserData(user.uid, { photoURL: url });\r\n        setPhoto(url);\r\n        setMessage(true);\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className={styles.settingsSection}>\r\n        <div className={styles.title}>\r\n          <h2>Foto de perfil</h2>\r\n        </div>\r\n        <div className={styles.settings}>\r\n          <div className={styles.profilePhoto}>\r\n            <img src={photo} alt='foto de perfil' />\r\n          </div>\r\n          <input\r\n            type='file'\r\n            className={styles.fileInput}\r\n            ref={fileRef}\r\n            onChange={handleLoadFile}\r\n          />\r\n          <button\r\n            type='button'\r\n            className={styles.button}\r\n            onClick={handleOpenFilePicker}\r\n            title='Elegir una foto de perfil'\r\n          >\r\n            Elige una foto de perfil\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <form className={styles.form} onSubmit={handleSubmit}>\r\n        <div className={styles.formSection}>\r\n          <div className={styles.title}>\r\n            <label htmlFor='name'>Nombre</label>\r\n          </div>\r\n          <div className={styles.settings}>\r\n            <input type='text' name='name' id='name' ref={nameRef} />\r\n          </div>\r\n        </div>\r\n        <div className={styles.formSection}>\r\n          <div className={styles.title}>\r\n            <label htmlFor='lastName'>Apellido</label>\r\n          </div>\r\n          <div className={styles.settings}>\r\n            <input\r\n              type='text'\r\n              name='lastName'\r\n              id='lastName'\r\n              ref={lastNameRef}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className={styles.formSection}>\r\n          <div className={styles.title}>\r\n            <label htmlFor='email'>Correo</label>\r\n          </div>\r\n          <div className={styles.settings}>\r\n            <input\r\n              type='text'\r\n              name='email'\r\n              id='email'\r\n              disabled\r\n              value={user.email}\r\n              className={styles.disable}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className={styles.formSection}>\r\n          <button\r\n            type='submit'\r\n            className={styles.button}\r\n            title='Guardar cambios'\r\n          >\r\n            Guardar cambios\r\n          </button>\r\n        </div>\r\n      </form>\r\n      {message && <MessageBox onClose={handleClose} />}\r\n    </div>\r\n  );\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"settingsContainer_container__yOj1X\"};","import styles from 'styles/components/settingsContainer.module.css';\r\n\r\nexport default function SettingsContainer({ children }) {\r\n  return <section className={styles.container}>{children}</section>;\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"logo\":\"userSettings_logo__EW3ne\"};","import CinemoLogo from 'assets/CinemoLogo';\r\nimport { AboutPage } from 'components/AboutPage';\r\nimport Settings from 'components/Settings';\r\nimport SettingsContainer from 'components/SettingsContainer';\r\nimport SpinnerForImg from 'components/SpinnerForImg';\r\nimport UserProfile from 'components/UserProfile';\r\nimport useUserData from 'hooks/useUserData';\r\nimport Footer from 'layout/Footer';\r\nimport Header from 'layout/Header';\r\nimport Main from 'layout/Main';\r\nimport { Link } from 'react-router-dom';\r\nimport styles from 'styles/pages/userSettings.module.css';\r\n\r\nexport default function UserSettings() {\r\n  const { userData, isLoading } = useUserData();\r\n\r\n  return (\r\n    <div>\r\n      <Header>\r\n        <nav className={styles.navBar}>\r\n          <Link to='/' className={styles.logo}>\r\n            <CinemoLogo />\r\n          </Link>\r\n          {isLoading ? <SpinnerForImg /> : <UserProfile user={userData} />}\r\n        </nav>\r\n      </Header>\r\n      <Main>\r\n        <SettingsContainer>\r\n          {isLoading ? null : <Settings user={userData} />}\r\n        </SettingsContainer>\r\n      </Main>\r\n      <Footer>\r\n        <AboutPage />\r\n      </Footer>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["compressImage","file","Promise","resolve","reject","canvas","document","createElement","image","Image","onload","width","height","getContext","drawImage","toBlob","blob","src","URL","createObjectURL","MessageBox","onClose","className","styles","onClick","title","Settings","user","useState","photoURL","photo","setPhoto","message","setMessage","fileRef","useRef","nameRef","lastNameRef","e","preventDefault","name","current","value","lastName","updateUserData","uid","files","target","length","setProfilePhoto","response","console","log","getProfilePhotoUrl","url","useEffect","alt","type","ref","onChange","click","onSubmit","htmlFor","id","disabled","email","SettingsContainer","children","UserSettings","useUserData","userData","isLoading","Header","to","CinemoLogo","SpinnerForImg","UserProfile","Main","Footer","AboutPage"],"sourceRoot":""}